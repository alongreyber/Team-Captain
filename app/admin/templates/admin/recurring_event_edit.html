{% extends 'admin/base.html' %}

{% block admin_content %}
<h1 class="title is-1">Edit Recurring Event</h1>
<form action="" method="post">
    {{ form.hidden_tag() }}

    <div class="field">
	{{ form.name.label(class_='label') }}
	<div class="control">
	    {{ form.name(class_='input') }}
	</div>
    </div>
    <div class="field">
	{{ form.content.label(class_='label') }}
	{{ form.content(id="editor") }}
    </div>
    <div class="field">
	{{ form.start_time.label(class_='label') }}
	<div class="control">
	    {{ form.start_time(class_='input') }}
	</div>
    </div>
    <div class="field">
	{{ form.end_time.label(class_='label') }}
	<div class="control">
	    {{ form.end_time(class_='input') }}
	</div>
    </div>
    <div class="field">
	{{ form.start_date.label(class_='label') }}
	<div class="control">
	{{ form.start_date(class_='input') }}
	</div>
    </div>
    <div class="field">
	{{ form.end_date.label(class_='label') }}
	<div class="control">
	{{ form.end_date(class_='input') }}
	</div>
    </div>
    <div class="field">
	{{ form.days_of_week.label(class_='label') }}
	<select class="select2" id="days_of_week" name="days_of_week" multiple="multiple" style="width: 100%">
	    {% for d in form.days_of_week.choices %}
		<option value={{d[0]}} {% if d[0] in selected_days_of_week %}selected="selected"{% endif %}>{{d[1]}}</option>
	    {% endfor %}
	</select>
    </div>

    <br />
    <h4 class="title is-4">Visible To</h4>
    <div class="field">
	{{ form.assigned_roles.label(class_='label') }}
	<select id="assigned_roles" class="select2" name="assigned_roles" multiple="multiple" style="width: 100%">
	    {% for r in form.assigned_roles.choices %}
		<option value="{{r[0]}}" {% if r[1] in selected_roles %}selected="selected"{% endif %}>{{r[1] | capitalize}}</option>
	    {% endfor %}
	</select>
    </div>
    <div class="field">
	{{ form.assigned_users.label(class_='label') }}
	<select id="assigned_users" class="select2" name="assigned_users" multiple="multiple" style="width: 100%">
	    {% for r in form.assigned_users.choices %}
		<option value="{{r[0]}}" {% if r[1] in selected_users %}selected="selected"{% endif %}>{{r[1]}}</option>
	    {% endfor %}
	</select>
    </div>

    <br />
    <input class="button is-primary" id="submit" name="submit" type="submit" value="Save">
    <a href="{{url_for('admin.recurring_event_publish', id=event.id)}}" class="button is-success" id="publish" >Publish</a>
    <a href="{{url_for('admin.recurring_event_delete', id=event.id)}}" class="button is-danger">Delete</a>
</form>
{% endblock %}
